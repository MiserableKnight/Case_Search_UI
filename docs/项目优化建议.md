## 项目结构优化建议

### 1. 标准化命名

首先，应该统一使用英文命名文件和目录，避免中文文件名（如"启动脚本.bat"和"前端模块介绍.md"）。这样可以避免跨平台和编码问题。

### 2. 重构项目结构

```
case_search_ui/                  # 项目根目录（使用小写和下划线命名）
├── app/                         # 应用主目录
│   ├── __init__.py              # 应用初始化
│   ├── api/                     # API路由（从routes.py拆分）
│   │   ├── __init__.py
│   │   ├── search.py            # 搜索相关API
│   │   ├── data.py              # 数据管理API
│   │   └── words.py             # 敏感词管理API
│   ├── core/                    # 核心业务逻辑
│   │   ├── __init__.py
│   │   ├── word_manager.py      # 敏感词管理核心
│   │   ├── case_processor.py    # 案例处理核心
│   │   ├── calculator.py        # 相似度计算核心
│   │   └── anonymizer.py        # 文本匿名化核心
│   ├── models/                  # 数据模型（如果有ORM）
│   │   └── __init__.py
│   ├── services/                # 服务层（替代utils）
│   │   ├── __init__.py
│   │   ├── word_service.py      # 敏感词管理服务
│   │   ├── case_service.py      # 案例处理服务
│   │   ├── similarity_service.py # 相似度计算服务
│   │   └── anonymization_service.py # 文本匿名化服务
│   ├── static/                  # 静态资源（保持不变）
│   ├── templates/               # 模板（保持不变）
│   └── data/                    # 数据目录（可考虑移至项目根目录）
│       ├── processed/
│       ├── raw/
│       └── temp/
├── config/                      # 配置文件目录
│   ├── __init__.py
│   ├── default.py               # 默认配置
│   ├── development.py           # 开发环境配置
│   └── production.py            # 生产环境配置
├── tests/                       # 测试目录
│   ├── __init__.py
│   ├── test_api.py
│   └── test_core.py
├── scripts/                     # 脚本目录
│   ├── start.bat                # Windows启动脚本
│   ├── start.sh                 # Linux/Mac启动脚本
│   └── setup_data.py            # 数据初始化脚本
├── logs/                        # 日志目录
├── docs/                        # 文档目录
│   ├── CHANGELOG.md
│   ├── GUIDE.md
│   ├── README.md
│   └── frontend.md              # 前端模块介绍（英文命名）
├── .env.example                 # 环境变量示例
├── .gitignore                   # Git忽略文件
├── requirements.txt             # 依赖文件
├── setup.py                     # 安装脚本
└── wsgi.py                      # WSGI入口点（替代run.py）
```

### 3. 具体改进建议

1. **应用结构优化**：（已完成）
   - 将大型的`routes.py`拆分为多个模块化的API文件(已完成)
   - 引入`core`目录存放核心业务逻辑(已完成)
   - 将`utils`改名为`services`，更符合服务层的概念(已完成)

2. **配置管理**：（已完成）
   - 创建专门的`config`目录，支持不同环境的配置
   - 将`__init__.py`中的配置逻辑移至配置模块

3. **入口点优化**：（已完成）
   - 将`run.py`重命名为`wsgi.py`，更符合Python Web应用标准
   - 创建统一的脚本目录，包含各平台启动脚本

4. **数据管理**：（已完成）
   - 考虑将`data`目录移至项目根目录，与应用代码分离
   - 清理临时目录中的UUID命名文件，建立更好的临时文件管理机制

5. **测试支持**：
   - 添加`tests`目录，支持单元测试和集成测试

6. **文档标准化**：
   - 统一使用英文命名文档文件
   - 添加更多文档，如API文档、部署文档等

### 4. 代码组织建议

1. **应用初始化**：（已完成）
   - 将`__init__.py`中的应用创建逻辑简化，配置移至配置模块
   - 使用工厂模式创建应用实例，便于测试

2. **路由组织**：（已完成）
   - 使用蓝图（Blueprint）将API按功能分组
   - 每个API模块专注于一个功能领域

3. **服务层**：(已完成)
   - 将业务逻辑从路由处理器中分离出来
   - 创建服务类封装数据处理、文本处理等功能

4. **错误处理**：
   - 创建统一的错误处理机制
   - 标准化API响应格式

### 5. 开发工具支持

1. **添加配置文件**：
   - `.editorconfig`：统一编辑器配置
   - `.flake8`或`pyproject.toml`：代码风格检查配置
   - `pytest.ini`：测试配置

2. **版本控制**：
   - 完善`.gitignore`
   - 添加`CONTRIBUTING.md`指导贡献流程

## 总结

您的项目结构已经有一定的组织，但可以通过以上建议使其更加模块化、可维护和符合Python项目的最佳实践。主要改进方向是：

1. 更好的模块化和关注点分离(已部分完成：core/services架构)
2. 标准化命名和文件组织
3. 配置与代码分离
4. 增强测试和文档支持
5. 优化开发工具配置

这些改进将使项目更易于维护、扩展和协作开发。

建议的后续操作：
在应用启动时添加定期清理临时文件的计划任务
在代码中使用 TempFileManager 类来管理所有临时文件
考虑添加日志记录，记录临时文件的创建和清理情况

## 已完成的重构工作

### v1.2.0 架构重构
1. **将utils模块拆分为core和services两层架构**：
   - core层：包含核心业务逻辑，如word_manager, case_processor, calculator, anonymizer
   - services层：封装core层功能，提供对外接口
   - 简化导入路径，统一使用`from app.services import XXXService`

2. **服务层实现**：
   - WordService：封装对SensitiveWordManager的调用
   - CaseService：封装对CaseProcessor的调用
   - SimilarityService：封装对TextSimilarityCalculator的调用
   - AnonymizationService：封装对TextAnonymizer的调用

3. **接口适配**：
   - 调整SimilarityService适配TextSimilarityCalculator的静态方法设计
   - 调整AnonymizationService适配TextAnonymizer的构造函数
   - 更新API路由使用新的服务层接口

